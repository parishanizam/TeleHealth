\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
Date 1 & 1.0 & Notes\\
Date 2 & 1.1 & Notes\\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at \wss{give url}

\wss{Also add any additional symbols, abbreviations or acronyms}

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for TeleHealth Insights. It is an at-home bilingual speech 
assessment system with video and audio analysis features. The system is designed 
to provide clear guidance to parents when administering the assessment to their 
children, in an environment where speech-language pathologists (SLPs) are 
unavailable. By streamlining the assessment process, the project aims to provide a 
convenient and comprehensive solution for SLPs to assess and support their patients'
speech and language development remotely.
% \wss{Fill in your project name and description}

Complementary documents include the System Requirement Specifications
and Module Guide.  The full documentation and implementation can be
found at \url{https://github.com/parishanizam/TeleHealth} 
% \wss{provide the url for your repo}

\section{Notation}

\wss{You should describe your notation.  You can use what is below as
  a starting point.}

The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding} & N/A \\
\midrule

\multirow{7}{0.3\textwidth}{Behaviour-Hiding} & Clinician GUI\\
& Parent GUI\\
& Authentication Module\\
& Result Storage Module\\
& Real-Time Feedback Module\\ 
& Report Generation Module\\
& Media Processing Module\\
& Video Processing Module\\
& Audio Processing Module\\
& Logging Module\\
& Question Bank Module\\
& Mandarian Question Bank\\
& English Question Bank\\
& Repetition Question Bank Module\\
& Matching Question Bacnk Module\\
\midrule

\multirow{3}{0.3\textwidth}{Software Decision} & {APP Controller}\\
& API Gateway\\
\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\newpage
~\newpage

\section{MIS of Authentication Module} \label{AuthenticationModule}

\subsection{Module}

AuthenticationModule

\subsection{Uses}

N/A

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
signup & \raggedright\arraybackslash username: str, email: str, password: str, role: str & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash UserAlreadyExistsException \\
\hline
login & \raggedright\arraybackslash username: str, password: str & \raggedright\arraybackslash sessionToken: str & \raggedright\arraybackslash InvalidCredentialsException \\
\hline
logout & \raggedright\arraybackslash sessionToken: str & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash InvalidSessionException \\
\hline
\end{tabular}
\end{center}


\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item userList: Set(User) - maintains a set of all registered users.
\item activeSessions: Map(sessionToken, User) - tracks active user sessions.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
\item Usernames and emails are unique.
\item Sessions are managed using session tokens.
\item Role can be one of ['parent', 'clinician', 'admin'].
\item Clinicians have given user their login token
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent signup():
\begin{itemize}
\item transition: Adds a new user to `userList` if the username and email are unique.
\item output: Returns `true` if the user is successfully created, otherwise throws `UserAlreadyExistsException`.
\item exception: Throws `UserAlreadyExistsException` if the username or email already exists.
\end{itemize}

\noindent login():
\begin{itemize}
\item transition: Adds a new session to `activeSessions` if the credentials are valid.
\item output: Returns a `sessionToken` for the logged-in user.
\item exception: Throws `InvalidCredentialsException` if the username or password is incorrect.
\end{itemize}

\noindent logout():
\begin{itemize}
\item transition: Removes the `sessionToken` from `activeSessions`.
\item output: Returns `true` if the session is successfully ended.
\item exception: Throws `InvalidSessionException` if the session token does not exist.
\end{itemize}

\subsubsection{Local Functions}

N/A

\section{MIS of Result Storage Module} \label{ResultStorageModule}

\subsection{Module}

ResultStorageModule

\subsection{Uses}

N/A

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
storeResult & \raggedright\arraybackslash data: JSON object & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash StorageException \\
\hline
retrieveResult & \raggedright\arraybackslash resultID: str & \raggedright\arraybackslash data: JSON object & \raggedright\arraybackslash NotFoundException \\
\hline
deleteResult & \raggedright\arraybackslash resultID: str & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash NotFoundException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item resultStorage: Map(resultID, JSON object) - stores all processed results with unique IDs.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
\item Each result is assigned a unique resultID.
\item Results are stored as JSON objects for flexibility.
\item Data is stored in MongoDB or an equivalent NoSQL database.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent storeResult():
\begin{itemize}
\item transition: Adds the `data` to `resultStorage` with a unique `resultID`.
\item output: Returns `true` if the result is successfully stored.
\item exception: Throws `StorageException` if there is an issue storing the data.
\end{itemize}

\noindent retrieveResult():
\begin{itemize}
\item transition: None
\item output: Returns the result associated with the `resultID`.
\item exception: Throws `NotFoundException` if the `resultID` does not exist.
\end{itemize}

\noindent deleteResult():
\begin{itemize}
\item transition: Removes the result associated with the `resultID` from `resultStorage`.
\item output: Returns `true` if the result is successfully deleted.
\item exception: Throws `NotFoundException` if the `resultID` does not exist.
\end{itemize}

\subsubsection{Local Functions}

N/A

\section{MIS of Report Generation Module} \label{ReportGenerationModule}

\subsection{Module}

ReportGenerationModule

\subsection{Uses}

\begin{itemize}
\item Result Storage Module
\item Media Processing Module
\item Question Bank Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
generateReport & \raggedright\arraybackslash sessionID: str, metadata: JSON object & \raggedright\arraybackslash report: JSON & \raggedright\arraybackslash ReportGenerationException \\
\hline
getReport & \raggedright\arraybackslash reportID: str & \raggedright\arraybackslash report: JSON & \raggedright\arraybackslash NotFoundException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item reportStorage: Map(reportID, Report) - stores all generated reports with unique IDs.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
\item Each report is assigned a unique reportID.
\item Reports are generated using data fetched from the Result Storage Module and other sources like the Question Bank Module.
\item Reports can be retrieved in JSON format then converted to PDF format
\item The clinician requesting the report has access to the session data.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent generateReport():
\begin{itemize}
\item transition: Creates a new report using the `sessionID` and `metadata`, and stores it in `reportStorage`.
\item output: Returns the generated report in the specified format (JSON or PDF).
\item exception: Throws `ReportGenerationException` if there is an error during report generation.
\end{itemize}

\noindent getReport():
\begin{itemize}
\item transition: None
\item output: Returns the report associated with the `reportID`.
\item exception: Throws `NotFoundException` if the `reportID` does not exist in `reportStorage`.
\end{itemize}

\subsubsection{Local Functions}

N/A

\section{MIS of Real-Time Feedback Module} \label{RealTimeFeedbackModule}

\subsection{Module}

RealTimeFeedbackModule

\subsection{Uses}

\begin{itemize}
\item Media Processing Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
provideFeedback & \raggedright\arraybackslash sessionID: str, liveFeed: media stream & \raggedright\arraybackslash feedback: JSON object & \raggedright\arraybackslash FeedbackException \\

logFeedback & \raggedright\arraybackslash sessionID: str, feedback: JSON object & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash LoggingException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item feedbackLogs: Map(sessionID, List(feedback)) - stores real-time feedback for sessions.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
\item The module receives a continuous media stream (audio or video) during a session.
\item Feedback is generated by analyzing live media streams using the Media Processing Module.
\item Feedback is stored for each session to provide session summaries if needed.
\item The module operates within acceptable latency constraints to ensure real-time performance.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent provideFeedback():
\begin{itemize}
\item transition: Generates feedback from the `liveFeed` media stream and optionally logs it in `feedbackLogs`.
\item output: Returns actionable feedback in a structured JSON format (e.g., "Adjust microphone", "Increase lighting").
\item exception: Throws `FeedbackException` if there is an issue processing the live feed.
\end{itemize}

\noindent logFeedback():
\begin{itemize}
\item transition: Adds the provided `feedback` to `feedbackLogs` for the corresponding `sessionID`.
\item output: Returns `true` if the feedback is successfully logged.
\item exception: Throws `LoggingException` if there is an error while logging the feedback.
\end{itemize}

\subsubsection{Local Functions}

N/A



\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\section{Appendix} \label{Appendix}

\wss{Extra information if required}

\newpage{}

\section*{Appendix --- Reflection}

\wss{Not required for CAS 741 projects}

The information in this section will be used to evaluate the team members on the
graduate attribute of Problem Analysis and Design.

\input{../../Reflection.tex}

\begin{enumerate}
  \item What went well while writing this deliverable? 
  \item What pain points did you experience during this deliverable, and how
    did you resolve them?
  \item Which of your design decisions stemmed from speaking to your client(s)
  or a proxy (e.g. your peers, stakeholders, potential users)? For those that
  were not, why, and where did they come from?
  \item While creating the design doc, what parts of your other documents (e.g.
  requirements, hazard analysis, etc), it any, needed to be changed, and why?
  \item What are the limitations of your solution?  Put another way, given
  unlimited resources, what could you do to make the project better? (LO\_ProbSolutions)
  \item Give a brief overview of other design solutions you considered.  What
  are the benefits and tradeoffs of those other designs compared with the chosen
  design?  From all the potential options, why did you select the documented design?
  (LO\_Explores)
\end{enumerate}


\end{document}