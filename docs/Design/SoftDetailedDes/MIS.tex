\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}p{3cm}X}
  \toprule {\bf Date} & {\bf Version} & {\bf Member(s)} & {\bf Notes}\\
  \midrule
  1/13/2025 & 1.0 & Promish & Added MIS Decomposition for RealTimeFeedback, Auth, ReportGeneration, Result Storage\\
  1/14/2025 & 1.1 & Jasmine & Added MIS Decomposition for Question Bank, English, Mandarin, Matching, Repetition\\
  1/15/2025 & 1.2 & Mitchell & Added MIS Decomposition for Parent GUI, Clinician GUI, API Gateway and APP Controller\\
  1/15/2025 & 1.3 & Parisha & Added MIS Decomposition for Logging, Media, Video and Audio Processing\\
  03/23/2025 & 2.1 & Promish Kandel & Implemented TA Feedback: \href{https://github.com/parishanizam/TeleHealth/issues/509}{Added formats for Question JSON \ref{JSONQuestionbank} and Result JSON \ref{JSONResultStorage}}\\
  03/23/2025 & 2.2 & Promish Kandel & Implemented TA Feedback: \href{https://github.com/parishanizam/TeleHealth/issues/510}{Updated MIS of Result storange and all Question Modules to link JSON question banks where necessary}\\
  03/23/2025 & 2.3 & Promish Kandel & Removed Logging, RealTimeFeedback and Report Generation modules based on changing design decisions. Also changed AppController to Landing Page GUI \\
  03/23/2025 & 2.4 & Promish Kandel & Implemented Peer Review: \href{https://github.com/parishanizam/TeleHealth/issues/342}{Took out the words "if media type is" to make it more clear that both vidoe and audio modules are called} \\
  \bottomrule
  \end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at \url{https://github.com/parishanizam/TeleHealth/blob/main/docs/SRS-Volere/SRS.pdf}

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for TeleHealth Insights. It is an at-home bilingual speech 
assessment system with video and audio analysis features. The system is designed 
to provide clear guidance to parents when administering the assessment to their 
children, in an environment where speech-language pathologists (SLPs) are 
unavailable. By streamlining the assessment process, the project aims to provide a 
convenient and comprehensive solution for SLPs to assess and support their patients'
speech and language development remotely.

Complementary documents include the System Requirement Specifications
and Module Guide.  The full documentation and implementation can be
found at \url{https://github.com/parishanizam/TeleHealth} 

\section{Notation}

The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\newpage

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[h!]
  \centering
  \begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
  \toprule
  \textbf{Level 1} & \textbf{Level 2}\\
  \midrule
  
  {Hardware-Hiding} & Logical module \\
  \midrule
  
  \multirow{8}{0.3\textwidth}{Behaviour-Hiding} & Clinician GUI\\
  & Parent GUI\\
  & Landing Page GUI\\
  & Authentication Module\\
  & Result Storage Module\\
  & Real-Time Feedback Module\\ 
  & Report Generation Module\\
  & Media Processing Module\\
  & Video Processing Module\\
  & Audio Processing Module\\
  & Logging Module\\
  & Question Bank Module\\
  & Mandarian Question Bank\\
  & English Question Bank\\
  & Repetition Question Bank Module\\
  & Matching Question Bank Module\\
  \midrule
  
  \multirow{1}{0.3\textwidth}{Software Decision} & API Gateway\\
  \bottomrule
  
  \end{tabular}
  \caption{Module Hierarchy}
  \label{TblMH}
  \end{table}
~\newpage
\section{MIS of Clinician GUI \label{mClinicianGUI} }

\subsection{Module}

clinicianGUI

\subsection{Uses}

\begin{itemize}
  \item API Gateway
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{8cm} p{2cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
displayLoginPage & - & - & - \\
displayClinicianDashboardPage & - & - & - \\
displayAddClientPage & - & - & - \\
displayPatientOverviewPage & - & - & - \\
displayPatientAssessmentResultsAnalysisPage & - & - & - \\
displayBiasReviewPage & - & - & - \\
displayFlagBiasPage & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
N/A

\subsubsection{Environment Variables}
N/A

\subsubsection{Assumptions}
N/A

\subsubsection{Access Routine Semantics}

\noindent displayLoginPage():
\begin{itemize}
\item transition: Navigates to and displays the clinician login page for the system.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayClinicianDashboardPage():
\begin{itemize}
\item transition: Navigates to and displays the clinician dashboard page for accessing a clinician's list of clients.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayAddClientPage():
\begin{itemize}
\item transition: Navigates to and displays the add client page for adding a new client to a clinician's list.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayPatientOverviewPage():
\begin{itemize}
\item transition: Navigates to and displays the patient overview page for accessing all of the patient's previous assessments.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayPatientAssessmentResultsAnalysisPage():
\begin{itemize}
\item transition: Navigates to and displays the patient assessment results analysis page for accessing all of the results of a particular assessment.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayBiasReviewPage():
\begin{itemize}
\item transition: Navigates to and displays the bias review page for reviewing and removing bias from a particular question in an assessment.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayFlagBiasPage():
\begin{itemize}
\item transition: Navigates to and displays the flag bias page for reviewing and flagging bias on a particular question in an assessment.
\item output: N/A
\item exception: N/A
\end{itemize}

\subsubsection{Local Functions}
N/A

~\newpage
\section{MIS of Parent GUI \label{mParentGUI} }

\subsection{Module}

parentGUI

\subsection{Uses}

\begin{itemize}
  \item API Gateway
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{8cm} p{4cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
displayLoginPage & - & - & - \\
displayCreateAccountPage & - & - & - \\
displayHomePage & - & - & - \\
displayAssessmentSelectionPage & - & - & - \\
displayParentChecklistPage & - & - & - \\
displayInputCheckPage & microphoneInput, cameraInput & - & - \\
displayAssessmentInstructionsPage & - & - & - \\
displayAssessmentQuestionsPage & - & - & - \\
displayCompletionPage & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
N/A

\subsubsection{Environment Variables}
\begin{itemize}
  \item microphoneInput
  \item cameraInput
\end{itemize}

\subsubsection{Assumptions}
N/A

\subsubsection{Access Routine Semantics}

\noindent displayLoginPage():
\begin{itemize}
\item transition: Navigates to and displays the parent login page for the system.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayCreateAccountPage():
\begin{itemize}
\item transition: Navigates to and displays the parent account creation page for creating a new account for the system.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayHomePage():
\begin{itemize}
\item transition: Navigates to and displays the homepage for a parent account, with the ability to start a new assessment.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayAssessmentSelectionPage():
\begin{itemize}
\item transition: Navigates to and displays the assessment selection page for selecting the type of assessment for the user.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayParentChecklistPage():
\begin{itemize}
\item transition: Navigates to and displays the parent checklist page for informing parents about the requirements of the assessment.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayInputCheckPage():
\begin{itemize}
\item transition: Navigates to and displays the input check page for testing input devices.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayAssessmentInstructionsPage():
\begin{itemize}
\item transition: Navigates to and displays the assessment instructions page for the child to read and engage with to learn how to interact with the assessment interface.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayAssessmentQuestionsPage():
\begin{itemize}
\item transition: Navigates to and displays the assessment questions page for displaying a question and its corresponding answers for the user to select.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent displayCompletionPage():
\begin{itemize}
\item transition: Navigates to and displays the completion page to confirm to the user that the assessment is complete and their results have been saved.
\item output: N/A
\item exception: N/A
\end{itemize}

\subsubsection{Local Functions}
N/A

\section{MIS of Landing Page GUI \label{mAppController} }

\subsection{Module}

Landing Page GUI

\subsection{Uses}

\begin{itemize}
  \item Clinician GUI
  \item Parent GUI
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{8cm} p{4cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
accessClinicianGUI & - & - & - \\
accessParentGUI & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
N/A

\subsubsection{Environment Variables}
N/A

\subsubsection{Assumptions}
N/A

\subsubsection{Access Routine Semantics}

\noindent accessClinicianGUI():
\begin{itemize}
\item transition: Routes user to Clinician GUI.
\item output: N/A
\item exception: N/A
\end{itemize}
\noindent accessParentGUI():
\begin{itemize}
\item transition: Routes user to Parent GUI.
\item output: N/A
\item exception: N/A
\end{itemize}

\subsubsection{Local Functions}
N/A

\section{MIS of API Gateway \label{mAppGateway} }

\subsection{Module}

APIGateway

\subsection{Uses}

\begin{itemize}
  \item Authentication
  \item ResultStorage
  \item MediaProcessing
  \item QuestionBank
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{8cm} p{4cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
accessAuthentication & - & - & - \\
accessResultStorage & - & - & - \\
accessMediaProcessing & - & - & - \\
accessQuestionBank & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
N/A

\subsubsection{Environment Variables}
N/A

\subsubsection{Assumptions}
N/A

\subsubsection{Access Routine Semantics}

\noindent accessAuthentication():
\begin{itemize}
\item transition: Controller accesses the authentication module.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent accessResultStorage():
\begin{itemize}
\item transition: Controller accesses the results storage module.
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent accessMediaProcessing():
\begin{itemize}
\item transition: Controller accesses the media processing module.
\item output: N/A
\item exception: N/A
\end{itemize}


\noindent accessQuestionBank():
\begin{itemize}
\item transition: Controller accesses the question bank module.
\item output: N/A
\item exception: N/A
\end{itemize}


\subsubsection{Local Functions}
N/A
\section{MIS of Authentication Module} \label{AuthenticationModule}


\subsection{Module}

AuthenticationModule

\subsection{Uses}

N/A

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
signup & \raggedright\arraybackslash username: str, email: str, password: str, role: str & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash UserAlreadyExistsException \\
\hline
login & \raggedright\arraybackslash username: str, password: str & \raggedright\arraybackslash sessionToken: str & \raggedright\arraybackslash InvalidCredentialsException \\
\hline
logout & \raggedright\arraybackslash sessionToken: str & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash InvalidSessionException \\
\hline
\end{tabular}
\end{center}


\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item userList: Set(User) - maintains a set of all registered users.
\item activeSessions: Map(sessionToken, User) - tracks active user sessions.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
\item Usernames and emails are unique.
\item Sessions are managed using session tokens.
\item Role can be one of ['parent', 'clinician', 'admin'].
\item Clinicians have given user their login token
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent signup():
\begin{itemize}
\item transition: Adds a new user to `userList` if the username and email are unique.
\item output: Returns `true` if the user is successfully created, otherwise throws `UserAlreadyExistsException`.
\item exception: Throws `UserAlreadyExistsException` if the username or email already exists.
\end{itemize}

\noindent login():
\begin{itemize}
\item transition: Adds a new session to `activeSessions` if the credentials are valid.
\item output: Returns a `sessionToken` for the logged-in user.
\item exception: Throws `InvalidCredentialsException` if the username or password is incorrect.
\end{itemize}

\noindent logout():
\begin{itemize}
\item transition: Removes the `sessionToken` from `activeSessions`.
\item output: Returns `true` if the session is successfully ended.
\item exception: Throws `InvalidSessionException` if the session token does not exist.
\end{itemize}

\subsubsection{Local Functions}

N/A
\section{MIS of Result Storage Module} \label{ResultStorageModule}

\subsection{Module}

ResultStorageModule

\subsection{Uses}

N/A

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
storeResult & \raggedright\arraybackslash data: JSON object (see Appendix~\ref{JSONResultStorage} for format) & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash StorageException \\
\hline
retrieveResult & \raggedright\arraybackslash resultID: str & \raggedright\arraybackslash data: JSON object & \raggedright\arraybackslash NotFoundException \\
\hline
deleteResult & \raggedright\arraybackslash resultID: str & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash NotFoundException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
\item resultStorage: Map(resultID, JSON object) - stores all processed results with unique IDs.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
\item Each result is assigned a unique resultID.
\item Results are stored as JSON objects for flexibility (the expected format is defined in Appendix~\ref{JSONResultStorage}).
\item Data is stored in MongoDB or an equivalent NoSQL database.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent storeResult():
\begin{itemize}
\item transition: Adds the \texttt{data} to \texttt{resultStorage} with a unique \texttt{resultID}.
\item output: Returns \texttt{true} if the result is successfully stored.
\item exception: Throws \texttt{StorageException} if there is an issue storing the data.
\end{itemize}

\noindent retrieveResult():
\begin{itemize}
\item transition: None
\item output: Returns the result associated with the \texttt{resultID}.
\item exception: Throws \texttt{NotFoundException} if the \texttt{resultID} does not exist.
\end{itemize}

\noindent deleteResult():
\begin{itemize}
\item transition: Removes the result associated with the \texttt{resultID} from \texttt{resultStorage}.
\item output: Returns \texttt{true} if the result is successfully deleted.
\item exception: Throws \texttt{NotFoundException} if the \texttt{resultID} does not exist.
\end{itemize}

\subsubsection{Local Functions}

N/A
\section{MIS of Media Processing Module} \label{MediaProcessingModule}

\subsection{Module}
MediaProcessingModule

\subsection{Uses}
VideoProcessingModule, AudioProcessingModule

\subsection{Syntax}

\subsubsection{Exported Constants}
N/A

\subsubsection{Exported Access Programs}
\begin{center}
  \begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
  \hline
  \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
  \hline
  processMedia & \raggedright\arraybackslash mediaFile: str, mediaType: str, assessmentID: str & \raggedright\arraybackslash report: MediaAnalysisReport & \raggedright\arraybackslash MediaProcessingException \\
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
\item processedMedia: Map(assessmentID, MediaAnalysisReport) - stores combined results from video and audio analysis.
\end{itemize}

\subsubsection{Environment Variables}
N/A

\subsubsection{Assumptions}
\begin{itemize}
\item mediaType specifies whether the file is video or audio (e.g., "video", "audio").
\item Delegates processing to VideoProcessingModule or AudioProcessingModule based on mediaType.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent processMedia():
\begin{itemize}
\item transition:
\begin{itemize}
\item Calls processVideo from VideoProcessingModule.
\item Calls processAudio from AudioProcessingModule.
\item Combines results from AudioProcessingModule and VideoProcessingModule into a single MediaAnalysisReport per assessment completed.
\end{itemize}
\item output: Returns a MediaAnalysisReport with details from video and audio analyses.
\item exception: Throws MediaProcessingException if the file cannot be processed or delegated.
\end{itemize}

\subsubsection{Local Functions}
N/A

\section{MIS of Question Bank Module} \label{QuestionBankModule}

\subsection{Module}

QuestionBankModule

\subsection{Uses}

EnglishQuestionBankModule, MandarinQuestionBankModule

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{3cm} p{4cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
selectQuestionBank & \raggedright\arraybackslash language: str & \raggedright\arraybackslash questionBank: ADT & \raggedright\arraybackslash InvalidLanguageException \\
\hline
retrieveQuestion & \raggedright\arraybackslash language: str, questionID: str & \raggedright\arraybackslash question: JSON object & \raggedright\arraybackslash NotFoundException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item activeQuestionBanks: Map(language, ADT) - maps language to its respective question bank module.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
  \item Supported languages include English and Mandarin.
  \item Each question bank module is preloaded with language-specific questions.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent selectQuestionBank():
\begin{itemize}
\item transition: Selects the question bank module corresponding to the input language.
\item output: Returns the selected question bank module.
\item exception: Throws \texttt{InvalidLanguageException} if the input language is not supported.
\end{itemize}

\noindent retrieveQuestion():
\begin{itemize}
\item transition: None
\item output: Retrieves the question from the appropriate question bank module.
\item exception: Throws \texttt{NotFoundException} if the questionID does not exist in the selected module.
\end{itemize}

\subsubsection{Local Functions}
N/A\\

\noindent \textbf{Note:} All JSON objects referenced in this module adhere to the format defined in Appendix~\ref{JSONQuestionbank}.

\section{MIS of Video Processing Module} \label{VideoProcessingModule}

\subsection{Module}
VideoProcessingModule

\subsection{Uses}
N/A
MediaProcessingModule

\subsection{Syntax}

\subsubsection{Exported Constants}
N/A

\subsubsection{Exported Access Programs}
\begin{center}
  \begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
  \hline
  \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
  \hline
  processVideo & \raggedright\arraybackslash videoFile: str, assessmentID: str & \raggedright\arraybackslash report: VideoAnalysisReport & \raggedright\arraybackslash VideoProcessingException \\
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
\item processedVideos: Map(assessmentID, VideoAnalysisReport) - stores results of processed videos.
\end{itemize}

\subsubsection{Environment Variables}
N/A

\subsubsection{Assumptions}
\begin{itemize}
\item Video files are in a supported format (e.g., MP4, AVI).
\item Video processing is done within a time threshold for real-time feedback.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent processVideo():
\begin{itemize}
\item transition: Analyzes the video to identify any disturbances, bias, or cheating patterns.
\item output: Returns a detailed VideoAnalysisReport containing flagged events and metrics.
\item exception: Throws VideoProcessingException if the file cannot be processed or analyzed.
\end{itemize}

\subsubsection{Local Functions}
N/A
\section{MIS of Audio Processing Module} \label{AudioProcessingModule}

\subsection{Module}
AudioProcessingModule

\subsection{Uses}
N/A
MediaProcessingModule

\subsection{Syntax}

\subsubsection{Exported Constants}
N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
  \hline
  \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
  \hline
  processAudio & \raggedright\arraybackslash audioFile: str, assessmentID: str & \raggedright\arraybackslash report: AudioAnalysisReport & \raggedright\arraybackslash AudioProcessingException \\
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
\item processedAudio: Map(assessmentID, AudioAnalysisReport) - stores results of processed audio.
\end{itemize}

\subsubsection{Environment Variables}
N/A

\subsubsection{Assumptions}
\begin{itemize}
\item Audio files are in a supported format (e.g., WAV, MP3).
\item Background noise levels are detectable and quantifiable.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent processAudio():
\begin{itemize}
\item transition: Analyzes the audio for disturbances such as background noise or interruptions.
\item output: Returns a detailed AudioAnalysisReport with flagged issues.
\item exception: Throws AudioProcessingException if the file cannot be processed or analyzed.
\end{itemize}

\subsubsection{Local Functions}
N/A
\section{MIS of English Question Bank Module} \label{EnglishQuestionBankModule}

\subsection{Module}

EnglishQuestionBankModule

\subsection{Uses}

MatchingQuestionBankModule, RepetitionQuestionBankModule

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
getQuestion & \raggedright\arraybackslash questionID: str & \raggedright\arraybackslash question: JSON object & \raggedright\arraybackslash NotFoundException \\
\hline
addQuestion & \raggedright\arraybackslash question: JSON object & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash StorageException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item englishQuestions: Map(questionID, JSON object) - stores English questions.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
  \item Questions are either matching or repetition type.
  \item Matching and Repetition modules are used to handle the respective types.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent getQuestion():
\begin{itemize}
\item transition: None
\item output: Returns the question corresponding to the questionID.
\item exception: Throws \texttt{NotFoundException} if the questionID does not exist.
\end{itemize}

\noindent addQuestion():
\begin{itemize}
\item transition: Adds the input question to \texttt{englishQuestions}.
\item output: Returns \texttt{true} if the question is successfully added.
\item exception: Throws \texttt{StorageException} if there is an issue storing the question.
\end{itemize}

\subsubsection{Local Functions}

N/A\\
\noindent \textbf{Note:} All JSON objects referenced in this module adhere to the format defined in Appendix~\ref{JSONQuestionbank}.

\section{MIS of Mandarin Question Bank Module} \label{MandarinQuestionBankModule}

\subsection{Module}

MandarinQuestionBankModule

\subsection{Uses}

MatchingQuestionBankModule, RepetitionQuestionBankModule

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
getQuestion & \raggedright\arraybackslash questionID: str & \raggedright\arraybackslash question: JSON object & \raggedright\arraybackslash NotFoundException \\
\hline
addQuestion & \raggedright\arraybackslash question: JSON object & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash StorageException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item mandarinQuestions: Map(questionID, JSON object) - stores Mandarin questions.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
  \item Questions are either matching or repetition type.
  \item Matching and Repetition modules are used to handle the respective types.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent getQuestion():
\begin{itemize}
\item transition: None
\item output: Returns the question corresponding to the questionID.
\item exception: Throws \texttt{NotFoundException} if the questionID does not exist.
\end{itemize}

\noindent addQuestion():
\begin{itemize}
\item transition: Adds the input question to \texttt{englishQuestions}.
\item output: Returns \texttt{true} if the question is successfully added.
\item exception: Throws \texttt{StorageException} if there is an issue storing the question.
\end{itemize}

\subsubsection{Local Functions}

N/A\\
\noindent \textbf{Note:} All JSON objects referenced in this module adhere to the format defined in Appendix~\ref{JSONQuestionbank}.
\section{MIS of Matching Question Bank Module} \label{MatchingQuestionBankModule}

\subsection{Module}

MatchingQuestionBankModule

\subsection{Uses}

N/A

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3cm} p{3cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
storeMatchingQuestion & \raggedright\arraybackslash question: JSON object & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash StorageException \\
\hline
retrieveMatchingQuestion & \raggedright\arraybackslash questionID: str & \raggedright\arraybackslash question: JSON object & \raggedright\arraybackslash NotFoundException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item matchingQuestions: Map(questionID, JSON object) - stores matching questions.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
  \item Questions have a unique ID.
  \item Data is stored in a JSON format for flexibility.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent storeMatchingQuestion():
\begin{itemize}
  \item transition: Adds the question to \texttt{matchingQuestions}.
  \item output: Returns \texttt{true} if successfully stored.
  \item exception: Throws \texttt{StorageException} if there is a storage error.
\end{itemize}

\noindent retrieveMatchingQuestion():
\begin{itemize}
  \item transition: None
  \item output: Returns the matching question corresponding to the questionID.
  \item exception: Throws \texttt{NotFoundException}
\end{itemize}

\subsubsection{Local Functions}

N/A\\
\noindent \textbf{Note:} All JSON objects referenced in this module adhere to the format defined in Appendix~\ref{JSONQuestionbank}.
\section{MIS of Repetition Question Bank Module} \label{RepetitionQuestionBankModule}

\subsection{Module}

RepetitionQuestionBankModule

\subsection{Uses}

N/A

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3cm} p{3cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
storeRepetitionQuestion & \raggedright\arraybackslash question: JSON object & \raggedright\arraybackslash status: bool & \raggedright\arraybackslash StorageException \\
\hline
retrieveRepetitionQuestion & \raggedright\arraybackslash questionID: str & \raggedright\arraybackslash question: JSON object & \raggedright\arraybackslash NotFoundException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item repetitionQuestions: Map(questionID, JSON object) - stores matching questions.
\end{itemize}

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

\begin{itemize}
  \item Questions have a unique ID.
  \item Data is stored in a JSON format.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent storeRepetitionQuestion():
\begin{itemize}
  \item transition: Adds the question to \texttt{repetitionQuestions}.
  \item output: Returns \texttt{true} if successfully stored.
  \item exception: Throws \texttt{StorageException} if there is a storage error.
\end{itemize}

\noindent retrieveRepetitionQuestion():
\begin{itemize}
  \item transition: None
  \item output: Returns the matching question corresponding to the questionID.
  \item exception: Throws \texttt{NotFoundException}
\end{itemize}

\subsubsection{Local Functions}

N/A\\
\noindent \textbf{Note:} All JSON objects referenced in this module adhere to the format defined in Appendix~\ref{JSONQuestionbank}.

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\newpage{}

\section{Appendix}
\subsection{JSON object format for Question Bank} \label{JSONQuestionbank}
The following is an example of the JSON format used for the Question Bank module. All question types follow the same structure, with the testType field modified to reflect the specific type of question (e.g., "matching", "repetition", etc.).

\begin{verbatim}
{
    "questionBankId": "english-matching",
    "language": "english",
    "testType": "matching",
    "questions": [
        {
            "id": 0,
            "title": "The picture is on the bed",
            "sound": "sound1.mp3",
            "options": [
                {
                    "id": "a",
                    "image": "image1.jpg"
                },
                {
                    "id": "b",
                    "image": "image2.jpg"
                },
                {
                    "id": "c",
                    "image": "image3.jpg"
                },
                {
                    "id": "d",
                    "image": "image4.jpg"
                }
            ],
            "correctAnswer": "b"
        }
    ]
}
\end{verbatim}

\subsection{JSON Object Format for Result Storage}\label{JSONResultStorage}

The following is an example of the JSON object used for storing assessment results:

\begin{verbatim}
{
  "assessment_id": 1,
  "date": "2025-02-05",
  "questionBankId": "english-matching",
  "results": [
    {
      "question_id": 2,
      "user_answer": "a",
      "mark_state": "b",
      "bias_state": true
    }]
}
\end{verbatim}

\subsection*{Reflection}

The information in this section will be used to evaluate the team members on the
graduate attribute of Problem Analysis and Design.

\input{../../Reflection.tex}

\begin{enumerate}
  \item What went well while writing this deliverable?
  \begin{itemize}
    \item Promish: I think as a group we were very coordinated and had the important parts, like the module
    hierarchy diagram, completed before our TA meeting. This allowed us to ask Chris if our design looked good and if 
    there was any feedback he could provide.
    \item Jasmine: The team worked well to break down the deliverable into smaller section and distribute tasks so that the
    team could efficiently complete the deliverable. Designing the interface went fairly smoothly since there was a
    old incomplete version of the website to gather inspiration from, and meeting with our capstone supervisor to
    discuss and review our design was very useful since her research specializes in human computer interfaces.
    \item Parisha: We defined who was doing what section of each MIS and MG document well, and all of our work aligned.
    We also met/discussed a lot to ensure we are on the same page and coordinated. We also asked questions to Chris
    which helped us with any confusion and continue working on track. The hierarchy diagram was made early so we could base
    everything off it and improve it as we went along.
    \item Mitchell: The team worked well to split up the sections fairly, well ahead of the deadline to ensure that all schedules
    were accommodated, as we all had a very busy first week of the semester. Planning in advance allowed us to meet our deadline and
    complete our work to a high quality. I also think the separation of responsibilities for designing the user interfaces allowed us to
    learn more about the system and how the pages would flow between one another.
  \end{itemize}
  \item What pain points did you experience during this deliverable, and how
    did you resolve them?
    \begin{itemize}
      \item Promish: The hardest part of this deliverable is knowing that right after it, we have to build everything within three weeks.
      I found myself second-guessing between what would make a good design and what would make a feasible design. We overcame
      this by talking to our supervisor and setting up a good timeline.
      \item Jasmine: Since the team chose a divide and conquer method for a significant portion of the deliverable, the team anticipated
      a pain point for ensuring consistency between members' work. To resolve this, the team made sure to communicate throughout the
      deliverable, discussing sections and sending examples to follow. Also, the team made sure to have a meeting with everyone's
      attendance to merge parts together and clean up/ make adjustments for a cohesive and consistent document.
      \item Parisha: The main point was the amount of time it took to get to completing this deliverable. Although the time it took to
      fill in the deliverable did not take that look, we had to discuss multiples to ensure we working making the right hierarchy and
      module discussions. Talking to our supervisor and our clinician helped.
      \item Mitchell: A pain point I experienced was learning how to properly write the MIS, as I have not seen an MIS in any of my previous
      courses. So the concepts of modules, and how to express them and ensure all integral information was present was a main paint point for me.
      I resolved this by looking at past groups MIS' to learn more about the requirements for those documents and how to properly write them.
    \end{itemize}
  \item Which of your design decisions stemmed from speaking to your client(s)
  or a proxy (e.g., your peers, stakeholders, potential users)? For those that
  were not, why, and where did they come from?
  \begin{itemize}
    \item Promish: Most of the design came from prior knowledge of working in co-op as a backend and frontend developer.
    We also had our supervisor help with the frontend UI design, as there was a mock-up of what she wanted overall or what she didn't like.
    \item Jasmine: Design decisions that stemmed from speaking to our client were interface usability decisions such as keeping the interface
    design simple and child-friendly, making sure navigation is as simple as possible so that it is intuitive for parents, and the
    assessment questions are displayed with large buttons and friendly images to be child friendly.
    \item Parisha: We met with our supervisor/clinician to discuss their old design and what improvements and new features they would like to have
     Much of the design decisions stemmed from these discussions and what our client wants to see. We will base off our UI design on the
     mock up and improve it to improve usability and design. Other design decisions like backend set up came from group members experiences
     from previous co-ops.
     \item Mitchell: The design of the assessment pages came from speaking with Dr. Du, our supervisor's collaborator. Her team already had an early
     concept for the assessment interface, which allowed us to prototype a variety of interfaces to make improvements to the initial concept. The clinician dashboard
     did not stem from speaking with peers, as this was a brand new addition to the system, so I created a new interface and concept for how it would be interacted with
     to meet all requirements specified.
  \end{itemize}
  \item While creating the design doc, what parts of your other documents (e.g.,
  requirements, hazard analysis, etc.), if any, needed to be changed, and why?
  \begin{itemize}
    \item Promish: Nothing needed to change as we had already discussed in-depth what we were building and had regular meetups with our supervisor.
    We referenced the SRS to ensure that our design met our goals and extended goals, but we didn't have to change any previous document because of our design.  
    \item Parisha: We referred to SRS and requirement docs to make the design documents. Not much has changed as we discussed in detail how the requirements should
    be set out early so minimal changes need to be made later unless absolutely necessary. 
    \item Mitchell: Since we frequently referenced our SRS document, not many details would need to be changed. As well, since our roles have remained consistent,
    our development plan should not need to change either.
  \end{itemize}
  \item What are the limitations of your solution? Put another way, given
  unlimited resources, what could you do to make the project better? (LO\_ProbSolutions)
  \begin{itemize}
    \item Promish: I would say a big limitation is the time aspect of making the capstone. I feel like given more time, we would be able to build it like an agile team,
    so that features are constantly tested with users. We are also limited in terms of getting video metadata, so the accuracy of our video analysis might suffer because of that.
    Finally, we are also limited by our skills; there are some aspects of the design that we couldn't do because we didn't know how to and didn't have the time to figure it out.
    \item Jasmine: The main limitation of our solution is development time. Other limitations include only having indirect access to user groups (bilingual children with speech difficulties),
    access to fluent mandarin speakers, etc.
    \item Parisha: If given more time, we would be able to make a whole real time feedback system that flagged bias in realtime and would be able to train and make a model
    completely on our own that would be more specific and flag biases a lot more accurately. Given more time we could have planned and started work in a more agile way and
    be able to get a lot more done. We found with the current timeline, most is focused on documentation and design, making it difficult to plan to do more difficult features. 
    \item Mitchell: One of the limitations of our solution is the development time, as since there was so much emphasis on the design, which took up a lot of the preparation time,
    the implementation time had been reduced. Given unlimited resources, I would look deeper into the machine learning models to get a more accurate bias detection, so that there would be less
    intervention required from the Clinicians to manually check on the bias detected.
  \end{itemize}
  \item Give a brief overview of other design solutions you considered. What
  are the benefits and trade-offs of those other designs compared with the chosen
  design? From all the potential options, why did you select the documented design?
  (LO\_Explores)
  \begin{itemize}
    \item Promish: For our backend, we thought about a monolithic architecture style because it would be easier to implement, but the trade-off is that it's not as maintainable.
    Our supervisor stressed that maintainability is a big priority for her, so we ended up going with a microservice architecture style. We also considered the various interactions between how
    the clinician and the parent UI. We previously thought about the parent making an account and the clinician would just search for the parent to add them to their client list. However,
    we thought it was best if the clinician added the parent to their client list and then gave them a code. This way, we would reduce troll accounts and other security gaps.
    \item Jasmine: Another design that was considered was having a singular question bank repository for all questions, this would lead to simpler architecture, but less organization and be inefficient to scale in the future.
    We went with modular question banks with dedicated submodules based on language + assessment type to balance flexibility and maintainability while also considering future expandability.  
    \item Parisha: Talking to our supervisors we came to the conclusion that maintainability and security were the main two focuses to improve on based of off the old/mock off site. We based our design decisions on prioritizing these requirements.
    \item Mitchell: Another design solution I considered was ordering the question banks first by question type, and then by language later. The benefit of this would be consistency in question types available,
    however, this would require that whenever a question type is selected, all languages would need to be available for that type. This would make scaling of the design somewhat difficult, as every time a new language is added, it would need questions of all types
    available. The design we went with allows us to add and swap languages using a strategy design pattern, so that when a user selects the language first, it will list the possible assessment types for that language, instead of selecting a question type, and
    realizing the language you wanted was unavailable.

  \end{itemize}
  \end{enumerate}
\end{document}